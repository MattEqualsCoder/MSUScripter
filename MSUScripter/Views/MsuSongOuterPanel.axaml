<UserControl xmlns="https://github.com/avaloniaui"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                xmlns:controls="clr-namespace:AvaloniaControls.Controls;assembly=AvaloniaControls"
                xmlns:viewModels="clr-namespace:MSUScripter.ViewModels"
                xmlns:views="clr-namespace:MSUScripter.Views"
                mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
                x:DataType="viewModels:MsuSongOuterPanelViewModel"
                x:Class="MSUScripter.Views.MsuSongOuterPanel">
    <DockPanel>
        <controls:HeaderFooter DockPanel.Dock="Top" BorderSize="0 0 0 2" Padding="5">
            <Grid ColumnDefinitions="*, Auto, Auto" RowDefinitions="Auto, Auto">
                <TextBlock Grid.Row="0" Grid.Column="0" Text="{Binding TrackTitleText}" FontSize="20" TextTrimming="CharacterEllipsis" />
                <controls:IconCheckbox
                    Grid.Row="0"
                    Grid.Column="1"
                    ToolTip.Tip="Mark the song as complete for record keeping purposes"
                    CheckedText="Song Complete"
                    CheckedBrush="LimeGreen"
                    CheckedIconKind="Flag"
                    UncheckedText="Song Incomplete"
                    UncheckedBrush="IndianRed"
                    UncheckedIconKind="FlagOutline"
                    Value="{Binding IsComplete}"
                    IsVisible="{Binding DisplayCompleteCheckbox}"
                    OnChecked="IconCheckbox_OnOnChecked"
                    Margin="0 0 5 0"
                ></controls:IconCheckbox>
                <TextBlock 
                    Grid.Row="1" 
                    Grid.Column="0"
                    Grid.ColumnSpan="3"
                    Text="{Binding TrackDescriptionText}"
                    IsVisible="{Binding HasTrackDescription}"
                    Margin="0 2 0 0"
                    TextWrapping="Wrap"
                ></TextBlock>
            </Grid>
        </controls:HeaderFooter>
        <Border DockPanel.Dock="Bottom" Background="{DynamicResource CardBorderColor}" Name="SummaryBorder" IsVisible="{Binding !DisplayAddSong}">
            <Grid ColumnDefinitions="*, *">
                <StackPanel Grid.Column="0">
                    <StackPanel Orientation="Horizontal">
                        <Button
                            Content="_Test Audio Levels"
                            Margin="5 5"
                            Padding="8 7"
                            Click="TestAudioLevelButton_OnClick"
                        ></Button>
                        <StackPanel Margin="0 5" Orientation="Vertical" VerticalAlignment="Stretch">
                            <TextBlock Text="{Binding AverageAudioLevel}" />
                            <TextBlock Text="{Binding PeakAudioLevel}" IsVisible="{Binding DisplaySecondAudioLine}" />
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button
                        Name="PlaySongButton"
                        Content="Play Song"
                        HorizontalAlignment="Center"
                        Margin="0 5"
                        Padding="8 5"
                        IsEnabled="{Binding !IsGeneratingPcmFiles}"
                        Click="PlaySongButton_OnClick"
                    ></Button>
                    <Button
                        Name="TestLoopButton"
                        Content="Test Loop"
                        HorizontalAlignment="Center"
                        Margin="5 5 0 5"
                        Padding="8 5"
                        IsEnabled="{Binding !IsGeneratingPcmFiles}"
                        Click="TestLoopButton_OnClick"
                    ></Button>
                    <Panel Width="5" IsVisible="{Binding !CanGeneratePcmFiles}"></Panel>
                    <SplitButton 
                        Content="_Generate PCM File" 
                        Margin="5 5 5 5" 
                        Padding="8 7"
                        Click="GeneratePcmSplitButton_OnClick"
                        IsEnabled="{Binding !IsGeneratingPcmFiles}"
                        IsVisible="{Binding ShowSplitButton}"
                    >
                        <SplitButton.Flyout>
                            <MenuFlyout Placement="BottomEdgeAlignedRight">
                                <MenuItem 
                                    Name="GenerateBlankPcmMenuItem" 
                                    Header="Generate _Blank PCM File"
                                    Click="GenerateBlankPcmMenuItem_OnClick"
                                ></MenuItem>
                                <MenuItem 
                                    Name="GeneratePrimaryPcmMenuItem" 
                                    Header="Generate as _Primary PCM File"
                                    Click="GeneratePrimaryPcmMenuItem_OnClick"
                                ></MenuItem>
                            </MenuFlyout>
                        </SplitButton.Flyout>
                    </SplitButton>
                    <Button
                        Content="_Generate PCM File"
                        Margin="5 5 5 5" 
                        Padding="8 7"
                        Click="GeneratePcmSplitButton_OnClick"
                        IsEnabled="{Binding !IsGeneratingPcmFiles}"
                        IsVisible="{Binding ShowNonSplitButton}"
                    />
                </StackPanel>
            </Grid>
        </Border>
        <Grid ColumnDefinitions="*" RowDefinitions="*" Margin="5">
            <views:MsuSongBasicPanel 
                Name="MsuSongBasicPanel"
                IsVisible="{Binding IsEnabled}" 
                DataContext="{Binding BasicPanelViewModel}"
                AdvancedModeToggled="MsuSongBasicPanel_OnAdvancedModeToggled"
                InputFileUpdated="MsuSongBasicPanel_OnInputFileUpdated"
            ></views:MsuSongBasicPanel>
            <views:MsuSongAdvancedPanel
                Name="MsuSongAdvancedPanel"
                IsVisible="{Binding IsEnabled}"
                DataContext="{Binding AdvancedPanelViewModel}"
                AdvancedModeToggled="MsuSongAdvancedPanel_OnAdvancedModeToggled"
                InputFileUpdated="MsuSongAdvancedPanel_OnInputFileChanged"
            ></views:MsuSongAdvancedPanel>
            <Border IsVisible="{Binding DisplayAddSong}" 
                    Background="{DynamicResource CardBackgroundColor}"
                    BorderBrush="{DynamicResource CardBorderColor}"
                    BorderThickness="3"
                    CornerRadius="5"
                    VerticalAlignment="Top"
                    Margin="0 0 0 10"
            >
                <StackPanel Orientation="Vertical">
                    <TextBlock Text="{Binding AddSongButtonHeaderText}" TextAlignment="Center" Margin="10" TextWrapping="Wrap"></TextBlock>
                    <Button Padding="5 3" HorizontalAlignment="Center" Margin="0 0 0 10" Click="AddSongButton_OnClick">Add Song</Button>
                </StackPanel>
                
            </Border>
        </Grid>
    </DockPanel>
</UserControl>
