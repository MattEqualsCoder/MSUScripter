<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:viewModels="clr-namespace:MSUScripter.ViewModels"
             xmlns:avalonia="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
             xmlns:controls1="clr-namespace:AvaloniaControls.Controls;assembly=AvaloniaControls"
             xmlns:views="clr-namespace:MSUScripter.Views"
             mc:Ignorable="d" d:DesignWidth="1000" d:DesignHeight="450"
             x:Class="MSUScripter.Views.PyMusicLooperPanel"
             x:DataType="viewModels:PyMusicLooperPanelViewModel">
    <StackPanel Orientation="Vertical">
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" IsVisible="{Binding DisplayOldVersionWarning}">
            <TextBlock Margin="2 5">
                You are currently on an old version of PyMusicLooper.
            </TextBlock>
            <controls1:LinkControl Margin="2 5"
                                  Click="GitHubLink_OnClick">
                Visit PyMusicLooper GitHub for how to update.
            </controls1:LinkControl>
        </StackPanel>
        
        <Grid ColumnDefinitions="* * Auto * * Auto * * Auto * Auto" RowDefinitions="Auto Auto" Margin="2">
            
            <!-- Min Duration Multiplier -->
            <views:FormLabel
                Grid.Row="0"
                Grid.Column="0"
                Margin="2 2 5 2"
                LabelText="{Binding Text.PyMusicLooperMinDurationMultiplierLabel}"
                ToolTipText="{Binding Text.PyMusicLooperMinDurationMultiplierToolTip}"
            />
            <controls1:NumericUpDownNoScroll 
                Grid.Row="1" 
                Grid.Column="0" 
                Margin="2 2 5 2" 
                Value="{Binding MinDurationMultiplier}"
            ></controls1:NumericUpDownNoScroll>
            
            <!-- Duration Limit -->
            <views:FormLabel
                Grid.Row="0" 
                Grid.Column="1" 
                Grid.ColumnSpan="3"
                Margin="2 2 5 2" 
                LabelText="{Binding Text.PyMusicLooperDurationLimitInSecondsLabel}"
                ToolTipText="{Binding Text.PyMusicLooperDurationLimitInSecondsToolTip}"
            />
            <controls1:NumericUpDownTime 
                Grid.Row="1" 
                Grid.Column="1" 
                Margin="2 2 5 2" 
                Value="{Binding MinLoopDuration}" 
                Watermark="Min"
            ></controls1:NumericUpDownTime>
            <TextBlock 
                Grid.Row="1" 
                Grid.Column="2" 
                VerticalAlignment="Center" 
                Margin="0 0 3 0"
            >
                to
            </TextBlock>
            <controls1:NumericUpDownTime 
                Grid.Row="1" 
                Grid.Column="3" 
                Margin="2 2 5 2" 
                Value="{Binding MaxLoopDuration}" 
                Watermark="Max">
            </controls1:NumericUpDownTime>
            
            <!-- Approximate Loop Time -->
            <views:FormLabel
                Grid.Row="0" 
                Grid.Column="4" 
                Grid.ColumnSpan="3"
                Margin="2 2 5 2" 
                LabelText="{Binding Text.PyMusicLooperApproximateTimesLabel}"
                ToolTipText="{Binding Text.PyMusicLooperApproximateTimesToolTip}"
            />
            <controls1:NumericUpDownTime 
                Grid.Row="1" 
                Grid.Column="4" 
                Margin="2 2 5 2" 
                Value="{Binding ApproximateStart}" 
                Watermark="Start"
            ></controls1:NumericUpDownTime>
            <TextBlock 
                Grid.Row="1" 
                Grid.Column="5" 
                VerticalAlignment="Center" 
                Margin="0 0 3 0">
                to
            </TextBlock>
            <controls1:NumericUpDownTime 
                Grid.Row="1" 
                Grid.Column="6" 
                Margin="2 2 5 2" 
                Value="{Binding ApproximateEnd}" 
                Watermark="End"
            ></controls1:NumericUpDownTime>
            
            <!-- Filter Samples -->
            <views:FormLabel
                Grid.Row="0" 
                Grid.Column="7" 
                Grid.ColumnSpan="3"
                Margin="2 2 5 2" 
                LabelText="{Binding Text.PyMusicLooperFilterSamplesLabel}"
                ToolTipText="{Binding Text.PyMusicLooperFilterSamplesToolTip}"
            />
            <controls1:NumericUpDownTime 
                Grid.Row="1" 
                Grid.Column="7" 
                Margin="2 2 5 2" 
                Value="{Binding FilterStart}" 
                Watermark="Start"
            ></controls1:NumericUpDownTime>
            <TextBlock 
                Grid.Row="1" 
                Grid.Column="8" 
                VerticalAlignment="Center" 
                Margin="0 0 3 0"
            >
                to
            </TextBlock>
            <controls1:NumericUpDownTime 
                Grid.Row="1" 
                Grid.Column="9" 
                Margin="2 2 5 2" 
                Value="{Binding FilterEnd}" 
                Watermark="End"
            ></controls1:NumericUpDownTime>
 
            <Button 
                Grid.Row="1" 
                Grid.Column="10" 
                HorizontalAlignment="Right" 
                Margin="2"
                Name="RunPyMusicLooperButton"
                IsEnabled="{Binding CanRun}"
                Click="RunPyMusicLooperButton_OnClick"
                Content="{Binding Text.PyMusicLooperRunButton}"
            />
        </Grid>
        
        <TextBlock 
            Text="{Binding Message}" 
            IsVisible="{Binding DisplayMessage}"
            HorizontalAlignment="Center"
            Margin="10">
        </TextBlock>
        
        <controls1:IconCheckbox 
            IsVisible="{Binding DisplayAutoRun}" 
            Text="{Binding Text.PyMusicLooperAutoRunCheckBox}"
            Value="{Binding AutoRun}"
            OnChecked="AutoRunIconCheckbox_OnOnChecked"
            HorizontalAlignment="Center"
            Margin="0 0 0 5"
        ></controls1:IconCheckbox>
        
        <controls1:LinkControl 
            Name="GitHubLink"
            IsVisible="{Binding DisplayGitHubLink}" 
            HorizontalAlignment="Center"
            Click="GitHubLink_OnClick"
        >
            Visit PyMusicLooper GitHub to download.
        </controls1:LinkControl>
        
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0 10 0 5" IsVisible="{Binding IsRunning}">
            <Button 
                Click="StopPyMusicLooperButton_OnClick"
                Content="{Binding Text.PyMusicLooperStopButton}"
            /> 
        </StackPanel>
        
        <DataGrid Name="AudioDataGrid" 
                  ItemsSource="{Binding CurrentPageResults}" 
                  AutoGenerateColumns="False" 
                  CanUserReorderColumns="False" 
                  CanUserResizeColumns="True" 
                  CanUserSortColumns="False"
                  IsReadOnly="True"
                  RowBackground="{DynamicResource CardBackground}"
                  SelectionMode="Single"
                  Margin="4"
                  MinHeight="230"
                  IsVisible="{Binding DisplayResultsTable}"
        >
            <DataGrid.Columns>
                
                <DataGridTemplateColumn Header="">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Name="PlaySongButton"
                                    Tag="{Binding}"
                                    IsEnabled="{Binding Generated}"
                                    Click="PlaySongButton_OnClick">
                                <avalonia:MaterialIcon Kind="Play" ></avalonia:MaterialIcon>
                            </Button>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                
                <DataGridTemplateColumn Header="">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <RadioButton Name="SelectedRadioButton" 
                                         Margin="5 0"
                                         Tag="{Binding}"
                                         IsChecked="{Binding IsSelected}"
                                         Click="SelectedRadioButton_OnClick"
                            ></RadioButton>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                
                <DataGridTextColumn 
                    Header="{Binding Text.PyMusicLooperGridLoopStartHeader}" 
                    Binding="{Binding LoopStart}"
                />
                <DataGridTextColumn 
                    Header="{Binding Text.PyMusicLooperGridLoopEndHeader}" 
                    Binding="{Binding LoopEnd}"
                />
                <DataGridTextColumn 
                    Header="{Binding Text.PyMusicLooperGridScoreHeader}" 
                    Binding="{Binding Score}"
                />
                <DataGridTextColumn 
                    Header="{Binding Text.PyMusicLooperGridLoopDurationHeader}" 
                    Binding="{Binding Duration}"
                />
                <DataGridTextColumn 
                    Header="{Binding Text.PyMusicLooperGridStatusHeader}" 
                    Binding="{Binding Status}"
                />
            </DataGrid.Columns>
        </DataGrid>
        <Grid ColumnDefinitions="*,*" IsVisible="{Binding DisplayResultsTable}" Margin="4">
            <Button 
                Grid.Column="0" 
                HorizontalAlignment="Left" 
                Name="PrevPageButton" 
                Click="PrevPageButton_OnClick" 
                IsEnabled="{Binding CanClickOnPrev}"
                Content="{Binding Text.PyMusicLooperPrevButton}"
            />
            <Button 
                Grid.Column="1" 
                HorizontalAlignment="Right" 
                Name="NextPageButton" 
                Click="NextPageButton_OnClick" 
                IsEnabled="{Binding CanClickOnNext}"
                Content="{Binding Text.PyMusicLooperNextButton}"
            />
        </Grid>
    </StackPanel>
</UserControl>
