<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:viewModels="clr-namespace:MSUScripter.ViewModels"
             xmlns:avalonia="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
             xmlns:controls="clr-namespace:AvaloniaControls.Controls;assembly=AvaloniaControls"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="MSUScripter.Views.TrackOverviewPanel"
             x:DataType="viewModels:TrackOverviewPanelViewModel">
    <DockPanel>

        <DataGrid Name="TrackDataGrid" 
                  ItemsSource="{Binding Rows}" 
                  AutoGenerateColumns="False" 
                  CanUserReorderColumns="False" 
                  CanUserResizeColumns="False"
                  IsReadOnly="True"
                  RowBackground="{DynamicResource CardBackground}"
                  SelectionMode="Single"
                  SelectedItem="{Binding SelectedRow}"
                  DoubleTapped="TrackDataGrid_OnDoubleTapped"
                  DragDrop.AllowDrop="True"
        >
            <DataGrid.ContextMenu>
                <ContextMenu>
                    <controls:CheckedMenuItem
                        Header="Show Is Complete Column"
                        IsChecked="{Binding ShowCompleteColumn}"
                        Click="ShowIsCompleteMenuItem_OnClick"
                    />
                    <controls:CheckedMenuItem
                        Header="Show Copyright Safe Column"
                        IsChecked="{Binding ShowCopyrightSafeColumn}"
                        Click="ShowCopyrightSafeMenuItem_OnClick"
                    />
                    <controls:CheckedMenuItem
                        Header="Show Add To Copyright Test Video Column"
                        IsChecked="{Binding ShowCheckCopyrightColumn}"
                        Click="ShowCheckCopyrightMenuItem_OnClick"
                    />
                    <controls:CheckedMenuItem
                        Header="Show Has Audio File(s) Column"
                        IsChecked="{Binding ShowHasAudioColumn}"
                        Click="ShowAudioFilesMenuItem_OnClick"
                    />
                </ContextMenu>
            </DataGrid.ContextMenu>
            <DataGrid.Columns>
                
                <!-- Add Song Button -->
                <DataGridTemplateColumn>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button
                                Padding="2 0"
                                Margin="0 0 1 0"
                                Tag="{Binding}"
                                ToolTip.Tip="Add Song"
                                Click="AddSongButton_OnClick"
                            >
                                <avalonia:MaterialIcon Kind="Plus"></avalonia:MaterialIcon>
                            </Button>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                
                <!-- Completed -->
                <DataGridTemplateColumn IsVisible="{Binding ShowCompleteColumn}">
                    <DataGridTemplateColumn.HeaderTemplate>
                        <DataTemplate>
                            <avalonia:MaterialIcon
                                Kind="Flag"
                                Width="14" 
                                Margin="0 0 0 1"
                            ></avalonia:MaterialIcon>
                        </DataTemplate>
                    </DataGridTemplateColumn.HeaderTemplate>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <controls:ImageButton  
                                Click="ToggleCompleteButton_OnClick" 
                                Tag="{Binding}"
                                DockPanel.Dock="Left"
                                IsVisible="{Binding HasSong}"
                            >
                                <avalonia:MaterialIcon 
                                    Kind="{Binding  CompletedIconKind}" 
                                    Width="14" 
                                    Foreground="{Binding CompletedIconColor}"
                                    Margin="0 0 0 1"
                                ></avalonia:MaterialIcon>
                            </controls:ImageButton>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                
                <!-- Copyright Safe -->
                <DataGridTemplateColumn IsVisible="{Binding ShowCopyrightSafeColumn}">
                    <DataGridTemplateColumn.HeaderTemplate>
                        <DataTemplate>
                            <avalonia:MaterialIcon
                                Kind="Copyright"
                                Width="14" 
                                Margin="0 0 0 1"
                            ></avalonia:MaterialIcon>
                        </DataTemplate>
                    </DataGridTemplateColumn.HeaderTemplate>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <controls:ImageButton
                                Click="ToggleCopyrightSafeButton_OnClick"
                                Tag="{Binding}" 
                                DockPanel.Dock="Left" 
                                IsVisible="{Binding HasSong}"
                            >
                                <avalonia:MaterialIcon 
                                    Kind="{Binding CopyrightSafeIconKind}" 
                                    Width="14" 
                                    Foreground="{Binding CopyrightSafeIconColor}"
                                    Margin="0 0 0 1">
                                </avalonia:MaterialIcon>
                            </controls:ImageButton>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                
                <!-- Add to Copyright Video -->
                <DataGridTemplateColumn IsVisible="{Binding ShowCheckCopyrightColumn}">
                    <DataGridTemplateColumn.HeaderTemplate>
                        <DataTemplate>
                            <avalonia:MaterialIcon
                                Kind="Video"
                                Width="14" 
                                Margin="0 0 0 1"
                            ></avalonia:MaterialIcon>
                        </DataTemplate>
                    </DataGridTemplateColumn.HeaderTemplate>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <controls:ImageButton 
                                Click="ToggleCheckCopyrightButton_OnClick" 
                                Tag="{Binding}" 
                                DockPanel.Dock="Left" 
                                IsVisible="{Binding HasSong}"
                            >
                                <avalonia:MaterialIcon 
                                    Kind="{Binding CheckCopyrightIconKind}" 
                                    Width="14" 
                                    Foreground="{Binding CheckCopyrightIconColor}"
                                    Margin="0 0 0 1">
                                </avalonia:MaterialIcon>
                            </controls:ImageButton>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                
                <!-- Has Audio Files -->
                <DataGridTemplateColumn IsVisible="{Binding ShowHasAudioColumn}">
                    <DataGridTemplateColumn.HeaderTemplate>
                        <DataTemplate>
                            <avalonia:MaterialIcon
                                Kind="VolumeSource"
                                Width="14" 
                                Margin="0 0 0 1"
                            ></avalonia:MaterialIcon>
                        </DataTemplate>
                    </DataGridTemplateColumn.HeaderTemplate>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <avalonia:MaterialIcon 
                                Kind="{Binding HasSongIconKind}" 
                                Width="14" 
                                Foreground="{Binding HasSongIconColor}"
                                IsVisible="{Binding HasSong}"
                                Margin="0 0 0 1">
                            </avalonia:MaterialIcon>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTextColumn Header="Track" Binding="{Binding TrackNumber}"/>
                <DataGridTextColumn Header="Track Name"  Binding="{Binding TrackName}"/>
                <DataGridTextColumn Header="Song Name"  Binding="{Binding Name}"/>
                <DataGridTextColumn Header="Artist Name"  Binding="{Binding Artist}"/>
                <DataGridTextColumn Header="Album Name"  Binding="{Binding Album}"/>
                <DataGridTextColumn Header="File(s)"  Binding="{Binding File}"/>
            </DataGrid.Columns>
        </DataGrid>
    </DockPanel>
</UserControl>