<UserControl x:Class="MSUScripter.UI.MsuSongMsuPcmInfoPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:MSUScripter.UI"
             xmlns:models="clr-namespace:MSUScripter.ViewModels"
             xmlns:system="clr-namespace:System;assembly=mscorlib"
             xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
             mc:Ignorable="d"
             d:DesignHeight="400" d:DesignWidth="600">
    <UserControl.DataContext>
        <models:MsuSongMsuPcmInfoViewModel></models:MsuSongMsuPcmInfoViewModel>
    </UserControl.DataContext>
    <UserControl.Resources>
        <ResourceDictionary Source="Generic.xaml" />
    </UserControl.Resources>
    <Grid>
        <GroupBox Margin="0 5 0 0" Name="MainGroupBox">
            <GroupBox.Header>
                <Grid Width="{Binding ActualWidth, ElementName=MainGroupBox,
                      Converter={StaticResource SubtractionConverter}}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    
                    <TextBlock 
                        Name="HeaderText"
                        Grid.Column="0"
                        Text="MsuPcm++ Details"
                    ></TextBlock>
                    <Button 
                        Name="RemoveButton"
                        Grid.Column="1" 
                        Padding=" 0"
                        Margin="0 0 -5 0"
                        Click="RemoveButton_OnClick"
                    >
                        <iconPacks:PackIconMaterial Kind="TrashCan"
                                                    Foreground="LightGray"
                                                    VerticalAlignment="Center"
                                                    HorizontalAlignment="Center" />
                    </Button>
                </Grid>
            </GroupBox.Header>
            <StackPanel Orientation="Vertical">
                
                <local:LabeledControl Text="Input File:" Hint="The file to be used as the input for this track/sub-track/sub-channel" HintVisibility="Visible">
                    <Grid Margin="0 0 0 0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <TextBox 
                            Name="FileTextBox"
                            Padding="0 4 0 0"
                            IsReadOnly="True"
                            IsEnabled="False"
                            Text="{Binding Path=File, Mode=TwoWay}"
                        ></TextBox>
                        <Button 
                            Name="FileButton"
                            Margin="5 0 0 0 "
                            Padding="8 0"
                            Grid.Column="1" 
                            Click="FileButton_OnClick"
                            Content="Browse..." />
                        <Button Grid.Column="2" x:Name="ClearFileButton"
                                Margin="5 0 0 0"
                                Padding="5 0 5 0"
                                Click="ClearFileButton_OnClick">×</Button>
                    </Grid>
                </local:LabeledControl>
                
                <local:LabeledControl Text="Normalization:" Hint="Normalize the current track to the specified RMS level, overrides the global normalization value" HintVisibility="Visible">
                    <TextBox 
                        Name="NormalizationTextBox"
                        Padding="0 4 0 0"
                        Text="{Binding Path=Normalization, Mode=TwoWay, TargetNullValue={x:Static system:String.Empty }}"
                        PreviewTextInput="DecimalTextBox_OnPreviewTextInput"
                        DataObject.Pasting="DecimalTextBox_OnPaste"
                        LostFocus="DecimalTextBox_OnLostFocus"
                    ></TextBox>
                </local:LabeledControl>
                
                <local:LabeledControl Text="Trim:" Hint="Trim the start and/or end of the current track at the specified sample" HintVisibility="Visible">
                    <Grid Margin="0 0 0 0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Margin="0 5 5 0">Start:</TextBlock>
                        <TextBox 
                            Grid.Column="1"
                            Name="TrimStartTextBox"
                            Padding="0 4 0 0"
                            Text="{Binding Path=TrimStart, Mode=TwoWay, TargetNullValue={x:Static system:String.Empty }}"
                            PreviewTextInput="IntTextBox_OnPreviewTextInput"
                            DataObject.Pasting="IntTextBox_OnPaste"
                            LostFocus="IntTextBox_OnLostFocus"
                        ></TextBox>
                        <TextBlock Grid.Column="2" Margin="15 5 5 0">End:</TextBlock>
                        <TextBox 
                            Grid.Column="3"
                            Name="TrimEndTextBox"
                            Padding="0 4 0 0"
                            Text="{Binding Path=TrimEnd, Mode=TwoWay, TargetNullValue={x:Static system:String.Empty }}"
                            PreviewTextInput="IntTextBox_OnPreviewTextInput"
                            DataObject.Pasting="IntTextBox_OnPaste"
                            LostFocus="IntTextBox_OnLostFocus"
                        ></TextBox>
                    </Grid>
                </local:LabeledControl>
                
                <local:LabeledControl Text="Loop:" Hint="The loop point of the current track, relative to this track/sub-track/sub-channel, in samples" HintVisibility="Visible">
                    <TextBox 
                        Name="LoopTextBox"
                        Padding="0 4 0 0"
                        Text="{Binding Path=Loop, Mode=TwoWay, TargetNullValue={x:Static system:String.Empty }}"
                        PreviewTextInput="IntTextBox_OnPreviewTextInput"
                        DataObject.Pasting="IntTextBox_OnPaste"
                        LostFocus="IntTextBox_OnLostFocus"
                    ></TextBox>
                </local:LabeledControl>
                
                <local:LabeledControl Text="Fade:" Hint="Apply a fade in or out effect to the current track lasting a specified number of samples. The cross fade will apply from the end of the current track to its loop point lasting a specified number of samples" HintVisibility="Visible">
                    <Grid Margin="0 0 0 0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Margin="0 5 5 0">In:</TextBlock>
                        <TextBox 
                            Grid.Column="1"
                            Name="FadeInTextBox"
                            Padding="0 4 0 0"
                            Text="{Binding Path=FadeIn, Mode=TwoWay, TargetNullValue={x:Static system:String.Empty }}"
                            PreviewTextInput="IntTextBox_OnPreviewTextInput"
                            DataObject.Pasting="IntTextBox_OnPaste"
                            LostFocus="IntTextBox_OnLostFocus"
                        ></TextBox>
                        <TextBlock Grid.Column="2" Margin="15 5 5 0">Out:</TextBlock>
                        <TextBox 
                            Grid.Column="3"
                            Name="FadeOutTextBox"
                            Padding="0 4 0 0"
                            Text="{Binding Path=FadeOut, Mode=TwoWay, TargetNullValue={x:Static system:String.Empty }}"
                            PreviewTextInput="IntTextBox_OnPreviewTextInput"
                            DataObject.Pasting="IntTextBox_OnPaste"
                            LostFocus="IntTextBox_OnLostFocus"
                        ></TextBox>
                        <TextBlock Grid.Column="4" Margin="15 5 5 0">Cross:</TextBlock>
                        <TextBox 
                            Grid.Column="5"
                            Name="CrossFadeTextBox"
                            Padding="0 4 0 0"
                            Text="{Binding Path=CrossFade, Mode=TwoWay, TargetNullValue={x:Static system:String.Empty }}"
                            PreviewTextInput="IntTextBox_OnPreviewTextInput"
                            DataObject.Pasting="IntTextBox_OnPaste"
                            LostFocus="IntTextBox_OnLostFocus"
                        ></TextBox>
                    </Grid>
                </local:LabeledControl>
                
                <local:LabeledControl Text="Padding:" Hint="Pad the beginning and/or ending of the current track with a specified number of silent samples" HintVisibility="Visible">
                    <Grid Margin="0 0 0 0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Margin="0 5 5 0">Start:</TextBlock>
                        <TextBox 
                            Grid.Column="1"
                            Name="PadStartTextBox"
                            Padding="0 4 0 0"
                            Text="{Binding Path=PadStart, Mode=TwoWay, TargetNullValue={x:Static system:String.Empty }}"
                            PreviewTextInput="IntTextBox_OnPreviewTextInput"
                            DataObject.Pasting="IntTextBox_OnPaste"
                            LostFocus="IntTextBox_OnLostFocus"
                        ></TextBox>
                        <TextBlock Grid.Column="2" Margin="15 5 5 0">End:</TextBlock>
                        <TextBox 
                            Grid.Column="3"
                            Name="PadEndTextBox"
                            Padding="0 4 0 0"
                            Text="{Binding Path=PadEnd, Mode=TwoWay, TargetNullValue={x:Static system:String.Empty }}"
                            PreviewTextInput="IntTextBox_OnPreviewTextInput"
                            DataObject.Pasting="IntTextBox_OnPaste"
                            LostFocus="IntTextBox_OnLostFocus"
                        ></TextBox>
                    </Grid>
                </local:LabeledControl>
                
                <local:LabeledControl Text="Tempo:" Hint="Alter the tempo of the current track by a specified ratio" HintVisibility="Visible">
                    <TextBox 
                        Name="TempoTextBox"
                        Padding="0 4 0 0"
                        Text="{Binding Path=Tempo, Mode=TwoWay, TargetNullValue={x:Static system:String.Empty }}"
                        PreviewTextInput="DecimalTextBox_OnPreviewTextInput"
                        DataObject.Pasting="DecimalTextBox_OnPaste"
                        LostFocus="DecimalTextBox_OnLostFocus"
                    ></TextBox>
                </local:LabeledControl>
                
                <local:LabeledControl Text="Sub Tracks:" x:Name="SubTrackLabeledControl" Hint="Files which will be concatenated together to form the input to the parent track" HintVisibility="Visible">
                    <StackPanel Orientation="Vertical">
                        <StackPanel Orientation="Vertical" Name="SubTrackStackPanel"  Grid.IsSharedSizeScope="True"></StackPanel>
                        <Button
                            Name="AddSubTrackButton"
                            Content="Add Sub Track"
                            HorizontalAlignment="Center"
                            Margin="0 5"
                            Padding="8 5"
                            Click="AddSubTrackButton_OnClick"
                        ></Button>
                    </StackPanel>
                </local:LabeledControl>
                
                <local:LabeledControl Text="Sub Channels:" x:Name="SubChannelLabeledControl"  Hint="Files which will be mixed together to form the input to the parent track" HintVisibility="Visible">
                    <StackPanel Orientation="Vertical">
                        <StackPanel Orientation="Vertical" Name="SubChannelStackPanel"  Grid.IsSharedSizeScope="True"></StackPanel>
                        <Button
                            Name="AddSubChannelButton"
                            Content="Add Sub Channel"
                            HorizontalAlignment="Center"
                            Margin="0 5"
                            Padding="8 5"
                            Click="AddSubChannelButton_OnClick"
                        ></Button>
                    </StackPanel>
                </local:LabeledControl>
                
                <StackPanel Orientation="Vertical" Name="MsuPcmButtonsStackPanel" Visibility="Collapsed">
                    <Separator Margin="0 5"></Separator>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button
                            Name="PlaySongButton"
                            Content="Play Song"
                            HorizontalAlignment="Center"
                            Margin="5 5"
                            Padding="8 5"
                            Click="PlaySongButton_OnClick"
                        ></Button>
                        <Button
                            Name="TestLoopButton"
                            Content="Test Loop"
                            HorizontalAlignment="Center"
                            Margin="5 5"
                            Padding="8 5"
                            Click="TestLoopButton_OnClick"
                        ></Button>
                        <Button
                            Name="GenerateAsMainPcmFileButton"
                            Content="Generate as primary .pcm file"
                            HorizontalAlignment="Center"
                            Margin="5 5"
                            Padding="8 5"
                            Click="GenerateAsMainPcmFileButton_OnClick"
                        ></Button>
                        <Button
                            Name="GeneratePcmFileButton"
                            Content="Generate .pcm file"
                            HorizontalAlignment="Center"
                            Margin="5 5"
                            Padding="8 5"
                            Click="GeneratePcmFileButton_OnClick"
                        ></Button>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </GroupBox>
    </Grid>
</UserControl>
